<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MindMate - Your Mental Wellness Companion</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        
        * {
            font-family: 'Inter', sans-serif;
        }
        
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        .chat-bubble-user {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 18px 18px 4px 18px;
        }
        
        .chat-bubble-bot {
            background: #f1f5f9;
            border-radius: 18px 18px 18px 4px;
            border: 1px solid #e2e8f0;
        }
        
        .mood-card {
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .mood-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
        }
        
        .mood-card.selected {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        
        .floating-button {
            position: fixed;
            bottom: 24px;
            right: 24px;
            z-index: 1000;
        }
        
        .page {
            display: none;
        }
        
        .page.active {
            display: block;
        }
        
        .typing-indicator {
            display: flex;
            align-items: center;
            gap: 4px;
            padding: 12px 16px;
        }
        
        .typing-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background-color: #94a3b8;
            animation: typing 1.4s infinite ease-in-out;
        }
        
        .typing-dot:nth-child(1) { animation-delay: -0.32s; }
        .typing-dot:nth-child(2) { animation-delay: -0.16s; }
        
        @keyframes typing {
            0%, 80%, 100% { transform: scale(0); opacity: 0.5; }
            40% { transform: scale(1); opacity: 1; }
        }
        
        .sidebar {
    transition: transform 0.3s ease; /* For mobile slide animation */
    
    /* --- Desktop and default styles --- */
    position: fixed;    /* Makes the sidebar fixed to the viewport */
    top: 0;             /* Aligns it to the top */
    left: 0;            /* Aligns it to the left */
    height: 100vh;      /* Makes it full viewport height */
    /* width is controlled by Tailwind's w-64 class on the element */
    z-index: 40;        /* Ensures it's above other content if needed, adjust as necessary. 
                           This is lower than mobile's z-index to interact correctly with the mobile overlay. */
}

@media (max-width: 768px) { /* Corresponds to Tailwind's 'md' breakpoint */
    .sidebar {
        /* --- Overrides for mobile --- */
        transform: translateX(-100%); /* Initially hidden off-screen on mobile */
        /* position: fixed; is inherited from the base .sidebar rule */
        /* height: 100vh; is inherited */
        z-index: 50; /* Higher z-index for mobile to be above the overlay when open */
    }
    
    .sidebar.open {
        transform: translateX(0); /* Slides in when .open class is added */
    }
}
    </style>
</head>
<body class="bg-gray-50 min-h-screen">
    <!-- Mobile Menu Overlay -->
    <div id="mobileOverlay" class="fixed inset-0 bg-black bg-opacity-50 z-40 hidden md:hidden"></div>
    
    <!-- Sidebar -->
    <div id="sidebar" class="sidebar bg-white w-64 min-h-screen shadow-xl border-r border-gray-200">
        <div class="p-6 border-b border-gray-200">
            <div class="flex items-center gap-3">
                <div class="w-10 h-10 bg-gradient-to-r from-purple-500 to-indigo-600 rounded-xl flex items-center justify-center">
                    <i class="fas fa-brain text-white text-lg"></i>
                </div>
                <div>
                    <h1 class="text-xl font-bold text-gray-900">MindMate</h1>
                    <p class="text-sm text-gray-500">Your wellness companion</p>
                </div>
            </div>
        </div>
        
        <nav class="p-4">
            <ul class="space-y-2">
                <li>
                    <button onclick="showPage('home')" class="nav-btn w-full flex items-center gap-3 px-4 py-3 text-left rounded-lg hover:bg-gray-100 transition-colors">
                        <i class="fas fa-home text-gray-600"></i>
                        <span class="font-medium text-gray-700">Home</span>
                    </button>
                </li>
                <li>
                    <button onclick="showPage('chat')" class="nav-btn w-full flex items-center gap-3 px-4 py-3 text-left rounded-lg hover:bg-gray-100 transition-colors">
                        <i class="fas fa-comments text-gray-600"></i>
                        <span class="font-medium text-gray-700">Chat</span>
                    </button>
                </li>
                <li>
                    <button onclick="showPage('mood-tracker')" class="nav-btn w-full flex items-center gap-3 px-4 py-3 text-left rounded-lg hover:bg-gray-100 transition-colors">
                        <i class="fas fa-chart-line text-gray-600"></i>
                        <span class="font-medium text-gray-700">Mood Tracker</span>
                    </button>
                </li>
                <li>
                    <button onclick="showPage('journal')" class="nav-btn w-full flex items-center gap-3 px-4 py-3 text-left rounded-lg hover:bg-gray-100 transition-colors">
                        <i class="fas fa-book text-gray-600"></i>
                        <span class="font-medium text-gray-700">Journal</span>
                    </button>
                </li>
                <li>
                    <button onclick="showPage('resources')" class="nav-btn w-full flex items-center gap-3 px-4 py-3 text-left rounded-lg hover:bg-gray-100 transition-colors">
                        <i class="fas fa-heart text-gray-600"></i>
                        <span class="font-medium text-gray-700">Resources</span>
                    </button>
                </li>
            </ul>
        </nav>
        
        <div class="absolute bottom-0 left-0 right-0 p-4 border-t border-gray-200">
            <div class="bg-blue-50 rounded-lg p-3">
                <p class="text-sm text-blue-800 font-medium">✨ Daily Streak</p>
                <p class="text-xs text-blue-600">5 days of check-ins!</p>
            </div>
        </div>
    </div>
    
    <!-- Main Content -->
    <div class="md:ml-64 min-h-screen">
        <!-- Header -->
        <header class="bg-white shadow-sm border-b border-gray-200 px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center gap-4">
                    <button id="mobileMenuBtn" class="md:hidden text-gray-600">
                        <i class="fas fa-bars text-xl"></i>
                    </button>
                    <h2 id="pageTitle" class="text-2xl font-bold text-gray-900">Welcome Back!</h2>
                </div>
                <div class="flex items-center gap-4">
                    <button class="relative p-2 text-gray-600 hover:text-gray-900">
                        <i class="fas fa-bell text-lg"></i>
                        <span class="absolute -top-1 -right-1 w-4 h-4 bg-red-500 rounded-full text-xs text-white flex items-center justify-center">2</span>
                    </button>
                    <div class="w-8 h-8 bg-gradient-to-r from-purple-500 to-indigo-600 rounded-full"></div>
                </div>
            </div>
        </header>
        
        <!-- Page Content -->
        <main class="p-6">
            <!-- Home Page -->
            <div id="home" class="page active">
                <div class="max-w-4xl mx-auto">
                    <!-- Welcome Card -->
                    <div class="gradient-bg rounded-2xl p-8 text-white mb-8">
                        <div class="flex items-center justify-between">
                            <div>
                                <h3 class="text-3xl font-bold mb-2">Hello, Sarah! 👋</h3>
                                <p class="text-blue-100 text-lg">How are you feeling today?</p>
                            </div>
                            <div class="hidden md:block">
                                <i class="fas fa-sun text-6xl opacity-20"></i>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Quick Mood Check -->
                    <div class="bg-white rounded-2xl shadow-lg p-6 mb-8">
                        <h4 class="text-xl font-semibold text-gray-900 mb-6">Quick Mood Check</h4>
                        <div class="grid grid-cols-2 md:grid-cols-5 gap-4" id="quickMoodGrid">
                            <div class="mood-card bg-white border-2 border-gray-200 rounded-xl p-4 text-center" data-mood="happy">
                                <div class="text-3xl mb-2">😊</div>
                                <p class="text-sm font-medium text-gray-700">Happy</p>
                            </div>
                            <div class="mood-card bg-white border-2 border-gray-200 rounded-xl p-4 text-center" data-mood="sad">
                                <div class="text-3xl mb-2">😢</div>
                                <p class="text-sm font-medium text-gray-700">Sad</p>
                            </div>
                            <div class="mood-card bg-white border-2 border-gray-200 rounded-xl p-4 text-center" data-mood="anxious">
                                <div class="text-3xl mb-2">😰</div>
                                <p class="text-sm font-medium text-gray-700">Anxious</p>
                            </div>
                            <div class="mood-card bg-white border-2 border-gray-200 rounded-xl p-4 text-center" data-mood="calm">
                                <div class="text-3xl mb-2">😌</div>
                                <p class="text-sm font-medium text-gray-700">Calm</p>
                            </div>
                            <div class="mood-card bg-white border-2 border-gray-200 rounded-xl p-4 text-center" data-mood="stressed">
                                <div class="text-3xl mb-2">😵</div>
                                <p class="text-sm font-medium text-gray-700">Stressed</p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Quick Actions -->
                    <div class="grid md:grid-cols-3 gap-6 mb-8">
                        <div class="bg-white rounded-2xl shadow-lg p-6 hover:shadow-xl transition-shadow cursor-pointer" onclick="showPage('chat')">
                            <div class="w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center mb-4">
                                <i class="fas fa-comments text-blue-600 text-xl"></i>
                            </div>
                            <h5 class="font-semibold text-gray-900 mb-2">Start Chatting</h5>
                            <p class="text-gray-600 text-sm">Talk about what's on your mind</p>
                        </div>
                        
                        <div class="bg-white rounded-2xl shadow-lg p-6 hover:shadow-xl transition-shadow cursor-pointer" onclick="showPage('journal')">
                            <div class="w-12 h-12 bg-green-100 rounded-xl flex items-center justify-center mb-4">
                                <i class="fas fa-pen text-green-600 text-xl"></i>
                            </div>
                            <h5 class="font-semibold text-gray-900 mb-2">Journal Entry</h5>
                            <p class="text-gray-600 text-sm">Reflect and write your thoughts</p>
                        </div>
                        
                        <div class="bg-white rounded-2xl shadow-lg p-6 hover:shadow-xl transition-shadow cursor-pointer" onclick="openBreathingExercise()">
                            <div class="w-12 h-12 bg-purple-100 rounded-xl flex items-center justify-center mb-4">
                                <i class="fas fa-leaf text-purple-600 text-xl"></i>
                            </div>
                            <h5 class="font-semibold text-gray-900 mb-2">Breathing Exercise</h5>
                            <p class="text-gray-600 text-sm">Take a moment to breathe</p>
                        </div>
                    </div>
                    
                    <!-- Recent Activity -->
                    <div class="bg-white rounded-2xl shadow-lg p-6">
                        <h4 class="text-xl font-semibold text-gray-900 mb-4">Recent Activity</h4>
                        <div class="space-y-4">
                            <div class="flex items-center gap-4 p-3 bg-gray-50 rounded-lg">
                                <div class="w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center">
                                    <i class="fas fa-comments text-blue-600 text-sm"></i>
                                </div>
                                <div class="flex-1">
                                    <p class="text-sm font-medium text-gray-900">Chat Session</p>
                                    <p class="text-xs text-gray-600">Discussed work stress - 2 hours ago</p>
                                </div>
                            </div>
                            <div class="flex items-center gap-4 p-3 bg-gray-50 rounded-lg">
                                <div class="w-8 h-8 bg-green-100 rounded-full flex items-center justify-center">
                                    <i class="fas fa-heart text-green-600 text-sm"></i>
                                </div>
                                <div class="flex-1">
                                    <p class="text-sm font-medium text-gray-900">Mood Check</p>
                                    <p class="text-xs text-gray-600">Feeling calm - Yesterday</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Chat Page -->
            <div id="chat" class="page">
                <div class="max-w-4xl mx-auto">
                    <div class="bg-white rounded-2xl shadow-lg h-[calc(100vh-12rem)] flex flex-col">
                        <!-- Chat Header -->
                        <div class="p-6 border-b border-gray-200">
                            <div class="flex items-center gap-4">
                                <div class="w-12 h-12 bg-gradient-to-r from-purple-500 to-indigo-600 rounded-full flex items-center justify-center">
                                    <i class="fas fa-robot text-white"></i>
                                </div>
                                <div>
                                    <h3 class="font-semibold text-gray-900">MindMate Assistant</h3>
                                    <p class="text-sm text-green-600 flex items-center gap-1">
                                        <div class="w-2 h-2 bg-green-500 rounded-full"></div>
                                        Online
                                    </p>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Chat Messages -->
                        <div id="chatMessages" class="flex-1 p-6 overflow-y-auto space-y-4">
                            <div class="flex gap-3">
                                <div class="w-8 h-8 bg-gradient-to-r from-purple-500 to-indigo-600 rounded-full flex items-center justify-center flex-shrink-0">
                                    <i class="fas fa-robot text-white text-sm"></i>
                                </div>
                                <div class="chat-bubble-bot p-4 max-w-md">
                                    <p class="text-gray-800">Hello! I'm here to listen and support you. How are you feeling today? 😊</p>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Typing Indicator -->
                        <div id="typingIndicator" class="px-6 hidden">
                            <div class="flex gap-3">
                                <div class="w-8 h-8 bg-gradient-to-r from-purple-500 to-indigo-600 rounded-full flex items-center justify-center flex-shrink-0">
                                    <i class="fas fa-robot text-white text-sm"></i>
                                </div>
                                <div class="chat-bubble-bot typing-indicator">
                                    <div class="typing-dot"></div>
                                    <div class="typing-dot"></div>
                                    <div class="typing-dot"></div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Chat Input -->
                        <div class="p-6 border-t border-gray-200">
                            <div class="flex gap-4">
                                <input 
                                    type="text" 
                                    id="chatInput" 
                                    placeholder="Share what's on your mind..." 
                                    class="flex-1 px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent"
                                >
                                <button 
                                    id="sendBtn" 
                                    onclick="sendMessage()" 
                                    class="bg-gradient-to-r from-purple-500 to-indigo-600 text-white px-6 py-3 rounded-xl hover:shadow-lg transition-all"
                                >
                                    <i class="fas fa-paper-plane"></i>
                                </button>
                            </div>
                            
                            <!-- Quick Responses -->
                            <div class="flex gap-2 mt-4 flex-wrap">
                                <button onclick="quickResponse('I feel stressed')" class="px-4 py-2 bg-gray-100 text-gray-700 rounded-full text-sm hover:bg-gray-200 transition-colors">
                                    I feel stressed
                                </button>
                                <button onclick="quickResponse('I need to talk')" class="px-4 py-2 bg-gray-100 text-gray-700 rounded-full text-sm hover:bg-gray-200 transition-colors">
                                    I need to talk
                                </button>
                                <button onclick="quickResponse('Help me relax')" class="px-4 py-2 bg-gray-100 text-gray-700 rounded-full text-sm hover:bg-gray-200 transition-colors">
                                    Help me relax
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Mood Tracker Page -->
            <div id="mood-tracker" class="page">
                <div class="max-w-6xl mx-auto">
                    <!-- Mood Stats Cards -->
                    <div class="grid md:grid-cols-4 gap-6 mb-8">
                        <div class="bg-white rounded-2xl shadow-lg p-6">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-gray-600 text-sm">Current Streak</p>
                                    <p class="text-2xl font-bold text-gray-900">5 days</p>
                                </div>
                                <div class="w-12 h-12 bg-green-100 rounded-xl flex items-center justify-center">
                                    <i class="fas fa-fire text-green-600"></i>
                                </div>
                            </div>
                        </div>
                        
                        <div class="bg-white rounded-2xl shadow-lg p-6">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-gray-600 text-sm">This Week</p>
                                    <p class="text-2xl font-bold text-gray-900">Mostly Happy</p>
                                </div>
                                <div class="w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center">
                                    <i class="fas fa-smile text-blue-600"></i>
                                </div>
                            </div>
                        </div>
                        
                        <div class="bg-white rounded-2xl shadow-lg p-6">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-gray-600 text-sm">Total Entries</p>
                                    <p class="text-2xl font-bold text-gray-900">47</p>
                                </div>
                                <div class="w-12 h-12 bg-purple-100 rounded-xl flex items-center justify-center">
                                    <i class="fas fa-calendar text-purple-600"></i>
                                </div>
                            </div>
                        </div>
                        
                        <div class="bg-white rounded-2xl shadow-lg p-6">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-gray-600 text-sm">Avg. Mood</p>
                                    <p class="text-2xl font-bold text-gray-900">7.2/10</p>
                                </div>
                                <div class="w-12 h-12 bg-yellow-100 rounded-xl flex items-center justify-center">
                                    <i class="fas fa-chart-line text-yellow-600"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Mood Chart -->
                    <div class="bg-white rounded-2xl shadow-lg p-6 mb-8">
                        <div class="flex items-center justify-between mb-6">
                            <h3 class="text-xl font-semibold text-gray-900">Mood Trends</h3>
                            <select class="px-4 py-2 border border-gray-300 rounded-lg text-sm">
                                <option>Last 7 days</option>
                                <option>Last 30 days</option>
                                <option>Last 3 months</option>
                            </select>
                        </div>
                        <canvas id="moodChart" width="400" height="200"></canvas>
                    </div>
                    
                    <!-- Recent Mood Entries -->
                    <div class="bg-white rounded-2xl shadow-lg p-6">
                        <h3 class="text-xl font-semibold text-gray-900 mb-6">Recent Entries</h3>
                        <div class="space-y-4">
                            <div class="flex items-center justify-between p-4 bg-gray-50 rounded-lg">
                                <div class="flex items-center gap-4">
                                    <span class="text-2xl">😊</span>
                                    <div>
                                        <p class="font-medium text-gray-900">Happy</p>
                                        <p class="text-sm text-gray-600">Today, 2:30 PM</p>
                                    </div>
                                </div>
                                <div class="text-right">
                                    <p class="text-lg font-semibold text-gray-900">8/10</p>
                                    <p class="text-xs text-gray-500">Great day at work</p>
                                </div>
                            </div>
                            
                            <div class="flex items-center justify-between p-4 bg-gray-50 rounded-lg">
                                <div class="flex items-center gap-4">
                                    <span class="text-2xl">😌</span>
                                    <div>
                                        <p class="font-medium text-gray-900">Calm</p>
                                        <p class="text-sm text-gray-600">Yesterday, 8:15 PM</p>
                                    </div>
                                </div>
                                <div class="text-right">
                                    <p class="text-lg font-semibold text-gray-900">7/10</p>
                                    <p class="text-xs text-gray-500">Relaxing evening</p>
                                </div>
                            </div>
                            
                            <div class="flex items-center justify-between p-4 bg-gray-50 rounded-lg">
                                <div class="flex items-center gap-4">
                                    <span class="text-2xl">😰</span>
                                    <div>
                                        <p class="font-medium text-gray-900">Anxious</p>
                                        <p class="text-sm text-gray-600">2 days ago, 11:00 AM</p>
                                    </div>
                                </div>
                                <div class="text-right">
                                    <p class="text-lg font-semibold text-gray-900">4/10</p>
                                    <p class="text-xs text-gray-500">Work presentation</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Journal Page -->
            <div id="journal" class="page">
                <div class="max-w-4xl mx-auto">
                    <!-- Journal Header -->
                    <div class="bg-white rounded-2xl shadow-lg p-6 mb-8">
                        <div class="flex items-center justify-between">
                            <div>
                                <h3 class="text-2xl font-bold text-gray-900">Your Journal</h3>
                                <p class="text-gray-600">Express your thoughts and feelings</p>
                            </div>
                            <button onclick="newJournalEntry()" class="bg-gradient-to-r from-purple-500 to-indigo-600 text-white px-6 py-3 rounded-xl hover:shadow-lg transition-all">
                                <i class="fas fa-plus mr-2"></i>New Entry
                            </button>
                        </div>
                    </div>
                    
                    <!-- Journal Prompts -->
                    <div class="bg-white rounded-2xl shadow-lg p-6 mb-8">
                        <h4 class="text-lg font-semibold text-gray-900 mb-4">Daily Prompts</h4>
                        <div class="grid md:grid-cols-2 gap-4">
                            <div class="p-4 bg-blue-50 rounded-lg cursor-pointer hover:bg-blue-100 transition-colors" onclick="usePrompt('What made you smile today?')">
                                <p class="text-blue-800 font-medium">💙 What made you smile today?</p>
                            </div>
                            <div class="p-4 bg-green-50 rounded-lg cursor-pointer hover:bg-green-100 transition-colors" onclick="usePrompt('What challenge did you overcome?')">
                                <p class="text-green-800 font-medium">🌱 What challenge did you overcome?</p>
                            </div>
                            <div class="p-4 bg-purple-50 rounded-lg cursor-pointer hover:bg-purple-100 transition-colors" onclick="usePrompt('What are you grateful for?')">
                                <p class="text-purple-800 font-medium">🙏 What are you grateful for?</p>
                            </div>
                            <div class="p-4 bg-yellow-50 rounded-lg cursor-pointer hover:bg-yellow-100 transition-colors" onclick="usePrompt('How did you take care of yourself today?')">
                                <p class="text-yellow-800 font-medium">✨ How did you take care of yourself today?</p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Journal Entry Form -->
                    <div id="journalForm" class="bg-white rounded-2xl shadow-lg p-6 mb-8 hidden">
                        <h4 class="text-lg font-semibold text-gray-900 mb-4">New Journal Entry</h4>
                        <div class="space-y-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Title (optional)</label>
                                <input type="text" id="journalTitle" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Your thoughts</label>
                                <textarea id="journalContent" rows="8" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500" placeholder="Write about your day, thoughts, feelings..."></textarea>
                            </div>
                            <div class="flex gap-4">
                                <button onclick="saveJournalEntry()" class="bg-gradient-to-r from-purple-500 to-indigo-600 text-white px-6 py-2 rounded-lg hover:shadow-lg transition-all">
                                    Save Entry
                                </button>
                                <button onclick="cancelJournalEntry()" class="border border-gray-300 text-gray-700 px-6 py-2 rounded-lg hover:bg-gray-50 transition-all">
                                    Cancel
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Recent Journal Entries -->
                    <div class="bg-white rounded-2xl shadow-lg p-6">
                        <h4 class="text-lg font-semibold text-gray-900 mb-6">Recent Entries</h4>
                        <div class="space-y-6" id="journalEntries">
                            <div class="border-l-4 border-purple-500 pl-6 py-4">
                                <div class="flex items-center justify-between mb-2">
                                    <h5 class="font-medium text-gray-900">Grateful Thursday</h5>
                                    <span class="text-sm text-gray-500">Today, 6:30 PM</span>
                                </div>
                                <p class="text-gray-700 text-sm leading-relaxed">Today I'm grateful for the small moments - my morning coffee, a text from a friend, and the sunset I caught on my evening walk. Sometimes it's these little things that make the biggest difference...</p>
                                <div class="flex items-center gap-4 mt-3">
                                    <button class="text-gray-500 hover:text-gray-700 text-sm">
                                        <i class="fas fa-edit mr-1"></i>Edit
                                    </button>
                                    <button class="text-gray-500 hover:text-gray-700 text-sm">
                                        <i class="fas fa-share mr-1"></i>Share
                                    </button>
                                </div>
                            </div>
                            
                            <div class="border-l-4 border-blue-500 pl-6 py-4">
                                <div class="flex items-center justify-between mb-2">
                                    <h5 class="font-medium text-gray-900">Overcoming Anxiety</h5>
                                    <span class="text-sm text-gray-500">Yesterday, 9:15 AM</span>
                                </div>
                                <p class="text-gray-700 text-sm leading-relaxed">Had a big presentation today and felt really anxious beforehand. Used the breathing techniques from MindMate and it actually helped calm me down. The presentation went well and I'm proud of myself for pushing through...</p>
                                <div class="flex items-center gap-4 mt-3">
                                    <button class="text-gray-500 hover:text-gray-700 text-sm">
                                        <i class="fas fa-edit mr-1"></i>Edit
                                    </button>
                                    <button class="text-gray-500 hover:text-gray-700 text-sm">
                                        <i class="fas fa-share mr-1"></i>Share
                                    </button>
                                </div>
                            </div>
                            
                            <div class="border-l-4 border-green-500 pl-6 py-4">
                                <div class="flex items-center justify-between mb-2">
                                    <h5 class="font-medium text-gray-900">Weekend Reflections</h5>
                                    <span class="text-sm text-gray-500">2 days ago, 8:00 PM</span>
                                </div>
                                <p class="text-gray-700 text-sm leading-relaxed">Spent the weekend with family and realized how important these connections are. We laughed, shared stories, and I felt so supported. Mental health isn't just about managing the hard times...</p>
                                <div class="flex items-center gap-4 mt-3">
                                    <button class="text-gray-500 hover:text-gray-700 text-sm">
                                        <i class="fas fa-edit mr-1"></i>Edit
                                    </button>
                                    <button class="text-gray-500 hover:text-gray-700 text-sm">
                                        <i class="fas fa-share mr-1"></i>Share
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Resources Page -->
            <div id="resources" class="page">
                <div class="max-w-6xl mx-auto">
                    <!-- Emergency Resources -->
                    <div class="bg-red-50 border border-red-200 rounded-2xl p-6 mb-8">
                        <div class="flex items-center gap-4 mb-4">
                            <div class="w-12 h-12 bg-red-100 rounded-xl flex items-center justify-center">
                                <i class="fas fa-exclamation-triangle text-red-600"></i>
                            </div>
                            <div>
                                <h3 class="text-lg font-semibold text-red-900">In Crisis? Get Help Now</h3>
                                <p class="text-red-700 text-sm">If you're having thoughts of self-harm, please reach out immediately</p>
                            </div>
                        </div>
                        <div class="grid md:grid-cols-3 gap-4">
                            <div class="bg-white p-4 rounded-lg">
                                <p class="font-medium text-gray-900">National Suicide Prevention Lifeline</p>
                                <p class="text-lg font-bold text-red-600">988</p>
                            </div>
                            <div class="bg-white p-4 rounded-lg">
                                <p class="font-medium text-gray-900">Crisis Text Line</p>
                                <p class="text-lg font-bold text-red-600">Text HOME to 741741</p>
                            </div>
                            <div class="bg-white p-4 rounded-lg">
                                <p class="font-medium text-gray-900">Emergency Services</p>
                                <p class="text-lg font-bold text-red-600">911</p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Coping Tools -->
                    <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8">
                        <div class="bg-white rounded-2xl shadow-lg p-6 hover:shadow-xl transition-shadow cursor-pointer" onclick="openBreathingExercise()">
                            <div class="w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center mb-4">
                                <i class="fas fa-wind text-blue-600"></i>
                            </div>
                            <h4 class="font-semibold text-gray-900 mb-2">Breathing Exercises</h4>
                            <p class="text-gray-600 text-sm">Guided breathing techniques to help you relax and center yourself</p>
                        </div>
                        
                        <div class="bg-white rounded-2xl shadow-lg p-6 hover:shadow-xl transition-shadow cursor-pointer" onclick="openMeditationGuide()">
                            <div class="w-12 h-12 bg-purple-100 rounded-xl flex items-center justify-center mb-4">
                                <i class="fas fa-meditation text-purple-600"></i>
                            </div>
                            <h4 class="font-semibold text-gray-900 mb-2">Meditation Guide</h4>
                            <p class="text-gray-600 text-sm">Simple meditation practices for mindfulness and stress relief</p>
                        </div>
                        
                        <div class="bg-white rounded-2xl shadow-lg p-6 hover:shadow-xl transition-shadow cursor-pointer" onclick="openGratitudePractice()">
                            <div class="w-12 h-12 bg-green-100 rounded-xl flex items-center justify-center mb-4">
                                <i class="fas fa-heart text-green-600"></i>
                            </div>
                            <h4 class="font-semibold text-gray-900 mb-2">Gratitude Practice</h4>
                            <p class="text-gray-600 text-sm">Daily gratitude exercises to shift perspective and boost mood</p>
                        </div>
                        
                        <div class="bg-white rounded-2xl shadow-lg p-6 hover:shadow-xl transition-shadow cursor-pointer" onclick="openProgressiveRelaxation()">
                            <div class="w-12 h-12 bg-yellow-100 rounded-xl flex items-center justify-center mb-4">
                                <i class="fas fa-spa text-yellow-600"></i>
                            </div>
                            <h4 class="font-semibold text-gray-900 mb-2">Progressive Relaxation</h4>
                            <p class="text-gray-600 text-sm">Step-by-step muscle relaxation techniques</p>
                        </div>
                        
                        <div class="bg-white rounded-2xl shadow-lg p-6 hover:shadow-xl transition-shadow cursor-pointer" onclick="openGroundingTechniques()">
                            <div class="w-12 h-12 bg-indigo-100 rounded-xl flex items-center justify-center mb-4">
                                <i class="fas fa-anchor text-indigo-600"></i>
                            </div>
                            <h4 class="font-semibold text-gray-900 mb-2">Grounding Techniques</h4>
                            <p class="text-gray-600 text-sm">Methods to stay present and manage overwhelming feelings</p>
                        </div>
                        
                        <div class="bg-white rounded-2xl shadow-lg p-6 hover:shadow-xl transition-shadow cursor-pointer" onclick="openSelfCareIdeas()">
                            <div class="w-12 h-12 bg-pink-100 rounded-xl flex items-center justify-center mb-4">
                                <i class="fas fa-sparkles text-pink-600"></i>
                            </div>
                            <h4 class="font-semibold text-gray-900 mb-2">Self-Care Ideas</h4>
                            <p class="text-gray-600 text-sm">Simple and effective self-care activities for daily wellness</p>
                        </div>
                    </div>
                    
                    <!-- Professional Resources -->
                    <div class="bg-white rounded-2xl shadow-lg p-6 mb-8">
                        <h3 class="text-xl font-semibold text-gray-900 mb-6">Professional Support</h3>
                        <div class="grid md:grid-cols-2 gap-6">
                            <div class="border border-gray-200 rounded-lg p-4">
                                <h4 class="font-medium text-gray-900 mb-2">Find a Therapist</h4>
                                <p class="text-gray-600 text-sm mb-3">Connect with licensed mental health professionals in your area</p>
                                <div class="space-y-2">
                                    <a href="#" class="block text-blue-600 hover:text-blue-800 text-sm">Psychology Today</a>
                                    <a href="#" class="block text-blue-600 hover:text-blue-800 text-sm">BetterHelp</a>
                                    <a href="#" class="block text-blue-600 hover:text-blue-800 text-sm">Talkspace</a>
                                </div>
                            </div>
                            
                            <div class="border border-gray-200 rounded-lg p-4">
                                <h4 class="font-medium text-gray-900 mb-2">Support Groups</h4>
                                <p class="text-gray-600 text-sm mb-3">Join communities of people with shared experiences</p>
                                <div class="space-y-2">
                                    <a href="#" class="block text-blue-600 hover:text-blue-800 text-sm">NAMI Support Groups</a>
                                    <a href="#" class="block text-blue-600 hover:text-blue-800 text-sm">Mental Health America</a>
                                    <a href="#" class="block text-blue-600 hover:text-blue-800 text-sm">Local Community Centers</a>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Educational Resources -->
                    <div class="bg-white rounded-2xl shadow-lg p-6">
                        <h3 class="text-xl font-semibold text-gray-900 mb-6">Learn More</h3>
                        <div class="grid md:grid-cols-3 gap-6">
                            <div class="text-center">
                                <div class="w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4">
                                    <i class="fas fa-brain text-blue-600 text-xl"></i>
                                </div>
                                <h4 class="font-medium text-gray-900 mb-2">Understanding Mental Health</h4>
                                <p class="text-gray-600 text-sm">Learn about common mental health conditions and their symptoms</p>
                            </div>
                            
                            <div class="text-center">
                                <div class="w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4">
                                    <i class="fas fa-book text-green-600 text-xl"></i>
                                </div>
                                <h4 class="font-medium text-gray-900 mb-2">Recommended Reading</h4>
                                <p class="text-gray-600 text-sm">Books and articles about mental wellness and personal growth</p>
                            </div>
                            
                            <div class="text-center">
                                <div class="w-16 h-16 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-4">
                                    <i class="fas fa-podcast text-purple-600 text-xl"></i>
                                </div>
                                <h4 class="font-medium text-gray-900 mb-2">Podcasts & Videos</h4>
                                <p class="text-gray-600 text-sm">Audio and video content from mental health experts</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>
    
    <!-- Floating Quick Chat Button -->
    <button onclick="showPage('chat')" class="floating-button bg-gradient-to-r from-purple-500 to-indigo-600 text-white w-14 h-14 rounded-full shadow-lg hover:shadow-xl transition-all">
        <i class="fas fa-comments text-xl"></i>
    </button>
    
    <!-- Breathing Exercise Modal -->
    <div id="breathingModal" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden flex items-center justify-center p-4">
        <div class="bg-white rounded-2xl p-8 max-w-md w-full text-center">
            <h3 class="text-2xl font-bold text-gray-900 mb-4">Breathing Exercise</h3>
            <div id="breathingCircle" class="w-32 h-32 border-4 border-blue-500 rounded-full mx-auto mb-6 flex items-center justify-center">
                <span id="breathingText" class="text-lg font-medium text-blue-600">Breathe In</span>
            </div>
            <p id="breathingInstruction" class="text-gray-600 mb-6">Follow the circle and breathe slowly</p>
            <div class="flex gap-4 justify-center">
                <button onclick="startBreathing()" id="breathingStartBtn" class="bg-blue-500 text-white px-6 py-2 rounded-lg hover:bg-blue-600 transition-colors">
                    Start
                </button>
                <button onclick="closeBreathingExercise()" class="border border-gray-300 text-gray-700 px-6 py-2 rounded-lg hover:bg-gray-50 transition-colors">
                    Close
                </button>
            </div>
        </div>
    </div>

    <script>
        // App State
        let currentPage = 'home';
        let chatMessages = [];
        let moodData = [];
        let journalEntries = [];
        let breathingInterval = null;
        
        // API Base URL (dummy endpoints)
        // const API_BASE = 'https://api.mindmate.com'; // Replace with actual API
        
        // Initialize App
        document.addEventListener('DOMContentLoaded', function() {
            initializeApp();
            setupEventListeners();
            loadMoodChart();
        });
        
        function initializeApp() {
            // Set active nav button
            updateActiveNav('home');
            
            // Load dummy data
            loadDummyData();
        }
        
        function setupEventListeners() {
            // Mobile menu toggle
            document.getElementById('mobileMenuBtn').addEventListener('click', toggleMobileMenu);
            document.getElementById('mobileOverlay').addEventListener('click', closeMobileMenu);
            
            // Chat input
            document.getElementById('chatInput').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    sendMessage();
                }
            });
            
            // Mood selection
            document.querySelectorAll('.mood-card').forEach(card => {
                card.addEventListener('click', function() {
                    selectMood(this.dataset.mood, this);
                });
            });
        }
        
        // Navigation Functions
        function showPage(pageId) {
            // Hide all pages
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            
            // Show selected page
            document.getElementById(pageId).classList.add('active');
            
            // Update page title
            const titles = {
                'home': 'Welcome Back!',
                'chat': 'Chat with MindMate',
                'mood-tracker': 'Mood Tracker',
                'journal': 'Your Journal',
                'resources': 'Wellness Resources'
            };
            document.getElementById('pageTitle').textContent = titles[pageId] || 'MindMate';
            
            // Update active nav
            updateActiveNav(pageId);
            
            // Close mobile menu
            closeMobileMenu();
            
            currentPage = pageId;
        }
        
        function updateActiveNav(pageId) {
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.classList.remove('bg-purple-100', 'text-purple-700');
            });
            
            const navButtons = document.querySelectorAll('.nav-btn');
            const pageIndex = ['home', 'chat', 'mood-tracker', 'journal', 'resources'].indexOf(pageId);
            if (pageIndex !== -1 && navButtons[pageIndex]) {
                navButtons[pageIndex].classList.add('bg-purple-100', 'text-purple-700');
            }
        }
        
        function toggleMobileMenu() {
            const sidebar = document.getElementById('sidebar');
            const overlay = document.getElementById('mobileOverlay');
            
            sidebar.classList.toggle('open');
            overlay.classList.toggle('hidden');
        }
        
        function closeMobileMenu() {
            const sidebar = document.getElementById('sidebar');
            const overlay = document.getElementById('mobileOverlay');
            
            sidebar.classList.remove('open');
            overlay.classList.add('hidden');
        }
        
        // Chat Functions
        async function sendMessage() {
            const input = document.getElementById('chatInput');
            const message = input.value.trim();
            
            if (!message) return;
            
            // Add user message
            addChatMessage(message, 'user');
            input.value = '';
            
            // Show typing indicator
            showTypingIndicator();
            
            try {
                // Call dummy API
                const response = await callChatAPI(message);
                
                // Hide typing indicator
                hideTypingIndicator();
                
                // Add bot response
                addChatMessage(response.message, 'bot');
                
                // Handle mood logging if mentioned
                if (response.suggestMoodLog) {
                    setTimeout(() => {
                        addChatMessage("Would you like to log your current mood? This helps me understand how you're feeling over time.", 'bot');
                    }, 1000);
                }
                
            } catch (error) {
                hideTypingIndicator();
                addChatMessage("I'm sorry, I'm having trouble connecting right now. Please try again in a moment.", 'bot');
            }
        }
        
        function quickResponse(message) {
            document.getElementById('chatInput').value = message;
            sendMessage();
        }
        
        function addChatMessage(message, sender) {
            const chatMessages = document.getElementById('chatMessages');
            const messageDiv = document.createElement('div');
            
            if (sender === 'user') {
                messageDiv.innerHTML = `
                    <div class="flex gap-3 justify-end">
                        <div class="chat-bubble-user text-white p-4 max-w-md">
                            <p>${message}</p>
                        </div>
                        <div class="w-8 h-8 bg-gray-300 rounded-full flex items-center justify-center flex-shrink-0">
                            <i class="fas fa-user text-gray-600 text-sm"></i>
                        </div>
                    </div>
                `;
            } else {
                messageDiv.innerHTML = `
                    <div class="flex gap-3">
                        <div class="w-8 h-8 bg-gradient-to-r from-purple-500 to-indigo-600 rounded-full flex items-center justify-center flex-shrink-0">
                            <i class="fas fa-robot text-white text-sm"></i>
                        </div>
                        <div class="chat-bubble-bot p-4 max-w-md">
                            <p class="text-gray-800">${message}</p>
                        </div>
                    </div>
                `;
            }
            
            chatMessages.appendChild(messageDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }
        
        function showTypingIndicator() {
            document.getElementById('typingIndicator').classList.remove('hidden');
            document.getElementById('chatMessages').scrollTop = document.getElementById('chatMessages').scrollHeight;
        }
        
        function hideTypingIndicator() {
            document.getElementById('typingIndicator').classList.add('hidden');
        }
        
        // Mood Functions
        function selectMood(mood, element) {
            // Remove previous selection
            document.querySelectorAll('.mood-card').forEach(card => {
                card.classList.remove('selected');
            });
            
            // Select current mood
            element.classList.add('selected');
            
            // Log mood
            logMoodAPI(mood);
            
            // Show confirmation
            setTimeout(() => {
                alert(`Mood "${mood}" logged successfully! 🎉`);
                element.classList.remove('selected');
            }, 500);
        }
        
        // Journal Functions
        function newJournalEntry() {
            document.getElementById('journalForm').classList.remove('hidden');
            document.getElementById('journalContent').focus();
        }
        
        function cancelJournalEntry() {
            document.getElementById('journalForm').classList.add('hidden');
            document.getElementById('journalTitle').value = '';
            document.getElementById('journalContent').value = '';
        }
        
        function usePrompt(prompt) {
            document.getElementById('journalForm').classList.remove('hidden');
            document.getElementById('journalContent').value = `${prompt}\n\n`;
            document.getElementById('journalContent').focus();
        }
        
        async function saveJournalEntry() {
            const title = document.getElementById('journalTitle').value || 'Untitled Entry';
            const content = document.getElementById('journalContent').value.trim();
            
            if (!content) {
                alert('Please write something before saving.');
                return;
            }
            
            try {
                await saveJournalAPI(title, content);
                alert('Journal entry saved successfully! ✍️');
                cancelJournalEntry();
                // Refresh journal entries (in real app, this would reload from API)
            } catch (error) {
                alert('Error saving journal entry. Please try again.');
            }
        }
        
        // Mood Chart
       function loadMoodChart() {
    const ctx = document.getElementById('moodChart');
    if (!ctx) return;
    
    try {
        const chartContext = ctx.getContext('2d');
        const dummyData = {
            labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
            datasets: [{
                label: 'Mood Score',
                data: [7, 6, 8, 5, 7, 9, 8],
                borderColor: '#667eea',
                backgroundColor: 'rgba(102, 126, 234, 0.1)',
                borderWidth: 3,
                fill: true,
                tension: 0.4,
                pointBackgroundColor: '#667eea',
                pointBorderColor: '#fff',
                pointBorderWidth: 2,
                pointRadius: 6
            }]
        };

        new Chart(chartContext, {
            type: 'line',
            data: dummyData,
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        display: false
                    }
                },
                scales: {
                    y: {
                        beginAtZero: true,
                        max: 10,
                        grid: {
                            color: '#f1f5f9'
                        },
                        ticks: {
                            color: '#64748b'
                        }
                    },
                    x: {
                        grid: {
                            display: false
                        },
                        ticks: {
                            color: '#64748b'
                        }
                    }
                }
            }
        });
    } catch (error) {
        console.error('Error loading mood chart:', error);
    }
}
        
        // Breathing Exercise
        function openBreathingExercise() {
            document.getElementById('breathingModal').classList.remove('hidden');
        }
        
        function closeBreathingExercise() {
            document.getElementById('breathingModal').classList.add('hidden');
            if (breathingInterval) {
                clearInterval(breathingInterval);
                breathingInterval = null;
            }
            resetBreathingUI();
        }
        
        function startBreathing() {
            const circle = document.getElementById('breathingCircle');
            const text = document.getElementById('breathingText');
            const instruction = document.getElementById('breathingInstruction');
            const startBtn = document.getElementById('breathingStartBtn');
            
            startBtn.textContent = 'Stop';
            startBtn.onclick = stopBreathing;
            
            let phase = 0; // 0: breathe in, 1: hold, 2: breathe out, 3: hold
            let count = 0;
            
            const phases = [
                { text: 'Breathe In', duration: 4, scale: 'scale-125' },
                { text: 'Hold', duration: 4, scale: 'scale-125' },
                { text: 'Breathe Out', duration: 6, scale: 'scale-75' },
                { text: 'Hold', duration: 2, scale: 'scale-75' }
            ];
            
            breathingInterval = setInterval(() => {
                const currentPhase = phases[phase];
                text.textContent = currentPhase.text;
                circle.className = `w-32 h-32 border-4 border-blue-500 rounded-full mx-auto mb-6 flex items-center justify-center transition-transform duration-1000 ${currentPhase.scale}`;
                
                count++;
                if (count >= currentPhase.duration) {
                    phase = (phase + 1) % 4;
                    count = 0;
                }
            }, 1000);
        }
        
        function stopBreathing() {
            if (breathingInterval) {
                clearInterval(breathingInterval);
                breathingInterval = null;
            }
            resetBreathingUI();
        }
        
        function resetBreathingUI() {
            document.getElementById('breathingText').textContent = 'Breathe In';
            document.getElementById('breathingCircle').className = 'w-32 h-32 border-4 border-blue-500 rounded-full mx-auto mb-6 flex items-center justify-center';
            document.getElementById('breathingStartBtn').textContent = 'Start';
            document.getElementById('breathingStartBtn').onclick = startBreathing;
        }
        
        // Resource Functions
        function openMeditationGuide() {
            alert('Meditation guide coming soon! 🧘‍♀️');
        }
        
        function openGratitudePractice() {
            alert('Gratitude practice coming soon! 🙏');
        }
        
        function openProgressiveRelaxation() {
            alert('Progressive relaxation guide coming soon! 😌');
        }
        
        function openGroundingTechniques() {
            alert('Grounding techniques coming soon! ⚓');
        }
        
        function openSelfCareIdeas() {
            alert('Self-care ideas coming soon! ✨');
        }
        
        // API Functions (Dummy implementations)
        async function callChatAPI(message) {
    await new Promise(resolve => setTimeout(resolve, 1500));
    const responses = {
        'stress': {
            message: "I hear that you're feeling stressed. That's completely understandable - stress is a natural response to challenging situations. Would you like to try a quick breathing exercise, or would you prefer to talk about what's causing the stress?",
            suggestMoodLog: true
        },
        'anxious': {
            message: "Anxiety can feel overwhelming, but you're not alone in this. It's brave of you to reach out. Let's take this one step at a time. What's one small thing that might help you feel a bit more grounded right now?",
            suggestMoodLog: true
        },
        'sad': {
            message: "I'm sorry you're feeling sad. Your feelings are valid, and it's okay to not be okay sometimes. Would you like to share what's on your mind, or would you prefer some gentle suggestions for self-care?",
            suggestMoodLog: true
        },
        'happy': {
            message: "It's wonderful to hear that you're feeling happy! What's contributing to this positive feeling today? Celebrating the good moments is just as important as working through the difficult ones.",
            suggestMoodLog: false
        },
        'default': {
            message: "Thank you for sharing that with me. I'm here to listen and support you. How can I help you today? We could chat more about how you're feeling, try some relaxation techniques, or explore your thoughts through journaling.",
            suggestMoodLog: false
        }
        // Remove the duplicate 'default' entry
    };

    const lowerMessage = message.toLowerCase();
    let response = responses.default;
    
    for (const [keyword, resp] of Object.entries(responses)) {
        if (keyword !== 'default' && lowerMessage.includes(keyword)) {
            response = resp;
            break;
        }
    }
    
    return response;
}

async function logMoodAPI(mood) {
    // Simulate API call
    await new Promise(resolve => setTimeout(resolve, 500));
    
    // Store mood locally (in real app, this would go to backend)
    const moodEntry = {
        mood: mood,
        timestamp: new Date().toISOString(),
        score: getMoodScore(mood)
    };
    
    // Add to local storage simulation
    const storedMoods = JSON.parse(localStorage.getItem('moodData') || '[]');
    storedMoods.push(moodEntry);
    localStorage.setItem('moodData', JSON.stringify(storedMoods));
    
    return { success: true };
}

async function saveJournalAPI(title, content) {
    // Simulate API call
    await new Promise(resolve => setTimeout(resolve, 800));
    
    const journalEntry = {
        id: Date.now(),
        title: title,
        content: content,
        timestamp: new Date().toISOString()
    };
    
    // Store locally
    const storedEntries = JSON.parse(localStorage.getItem('journalEntries') || '[]');
    storedEntries.unshift(journalEntry);
    localStorage.setItem('journalEntries', JSON.stringify(storedEntries));
    
    return { success: true };
}

function getMoodScore(mood) {
    const scores = {
        'happy': 8,
        'calm': 7,
        'sad': 3,
        'anxious': 4,
        'stressed': 4
    };
    return scores[mood] || 5;
}

function loadDummyData() {
    // Initialize with some dummy data if none exists
    if (!localStorage.getItem('moodData')) {
        const dummyMoods = [
            { mood: 'happy', timestamp: new Date(Date.now() - 86400000).toISOString(), score: 8 },
            { mood: 'calm', timestamp: new Date(Date.now() - 172800000).toISOString(), score: 7 },
            { mood: 'anxious', timestamp: new Date(Date.now() - 259200000).toISOString(), score: 4 }
        ];
        localStorage.setItem('moodData', JSON.stringify(dummyMoods));
    }
    
    if (!localStorage.getItem('journalEntries')) {
        const dummyEntries = [
            {
                id: 1,
                title: 'Grateful Thursday',
                content: 'Today I\'m grateful for the small moments - my morning coffee, a text from a friend, and the sunset I caught on my evening walk. Sometimes it\'s these little things that make the biggest difference...',
                timestamp: new Date().toISOString()
            },
            {
                id: 2,
                title: 'Overcoming Anxiety',
                content: 'Had a big presentation today and felt really anxious beforehand. Used the breathing techniques from MindMate and it actually helped calm me down. The presentation went well and I\'m proud of myself for pushing through...',
                timestamp: new Date(Date.now() - 86400000).toISOString()
            }
        ];
        localStorage.setItem('journalEntries', JSON.stringify(dummyEntries));
    }
}

// Additional utility functions
function formatDate(dateString) {
    const date = new Date(dateString);
    const now = new Date();
    const diffTime = Math.abs(now - date);
    const diffDays = Math.floor(diffTime / (1000 * 60 * 60 * 24));
    
    if (diffDays === 0) {
        return 'Today';
    } else if (diffDays === 1) {
        return 'Yesterday';
    } else if (diffDays < 7) {
        return `${diffDays} days ago`;
    } else {
        return date.toLocaleDateString();
    }
}

// Export functions for potential future API integration
const MindMateAPI = {
    chat: callChatAPI,
    logMood: logMoodAPI,
    saveJournal: saveJournalAPI,
    // Placeholder for future endpoints
    getInsights: async () => ({ insights: ['You\'ve been consistently tracking your mood!', 'Your stress levels seem lower this week.'] }),
    getRecommendations: async () => ({ recommendations: ['Try the 4-7-8 breathing technique', 'Consider journaling before bed'] })
};

// Initialize service worker for offline functionality (optional)
if ('serviceWorker' in navigator) {
    window.addEventListener('load', function() {
        navigator.serviceWorker.register('./sw.js').then(function(registration) {
            console.log('SW registered: ', registration);
        }).catch(function(registrationError) {
            console.log('SW registration failed: ', registrationError);
        });
    });
}

// Add some enhanced interactivity
document.addEventListener('DOMContentLoaded', function() {
    // Add smooth scrolling
    document.documentElement.style.scrollBehavior = 'smooth';
    
    // Add loading states
    const buttons = document.querySelectorAll('button');
    buttons.forEach(button => {
        button.addEventListener('click', function() {
            if (this.classList.contains('loading')) return;
            
            const originalText = this.innerHTML;
            this.classList.add('loading');
            this.innerHTML = '<i class="fas fa-spinner fa-spin"></i>';
            
            setTimeout(() => {
                this.classList.remove('loading');
                this.innerHTML = originalText;
            }, 1000);
        });
    });
    
    // Add focus states for accessibility
    const focusableElements = document.querySelectorAll('button, input, textarea, [tabindex]:not([tabindex="-1"])');
    focusableElements.forEach(element => {
        element.addEventListener('focus', function() {
            this.style.boxShadow = '0 0 0 3px rgba(102, 126, 234, 0.3)';
        });
        
        element.addEventListener('blur', function() {
            this.style.boxShadow = '';
        });
    });
});

// Add keyboard shortcuts
document.addEventListener('keydown', function(e) {
    // Ctrl/Cmd + 1-5 for navigation
    if ((e.ctrlKey || e.metaKey) && e.key >= '1' && e.key <= '5') {
        e.preventDefault();
        const pages = ['home', 'chat', 'mood-tracker', 'journal', 'resources'];
        const pageIndex = parseInt(e.key) - 1;
        if (pages[pageIndex]) {
            showPage(pages[pageIndex]);
        }
    }
    
    // Escape to close modals
    if (e.key === 'Escape') {
        closeBreathingExercise();
        closeMobileMenu();
    }
});

console.log('MindMate App Initialized 🧠✨');

    </script>
    
    <!-- Font Awesome for icons -->
   
</body>
</html>
